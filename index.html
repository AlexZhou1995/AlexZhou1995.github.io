<!DOCTYPE html>


<html lang="cn">
  

    <head>
      <meta charset="utf-8" />
        
      <meta
        name="viewport"
        content="width=device-width, initial-scale=1, maximum-scale=1"
      />
      <title> HomePage</title>
  <meta name="generator" content="hexo-theme-ayer">
      
      <link rel="shortcut icon" href="/favicon.ico" />
       
<link rel="stylesheet" href="/dist/main.css">

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/gh/Shen-Yu/cdn/css/remixicon.min.css"
      />
      
<link rel="stylesheet" href="/css/custom.css">
 
      <script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script>
       
 

      <link
        rel="stylesheet"
        href="https://cdn.jsdelivr.net/npm/@sweetalert2/theme-bulma@5.0.1/bulma.min.css"
      />
      <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11.0.19/dist/sweetalert2.min.js"></script>

      <!-- mermaid -->
      
      <style>
        .swal2-styled.swal2-confirm {
          font-size: 1.6rem;
        }
      </style>
    </head>
  </html>
</html>


<body>
  <div id="app">
    
      
      <canvas width="1777" height="841"
        style="position: fixed; left: 0px; top: 0px; z-index: 99999; pointer-events: none;"></canvas>
      
    <main class="content on">
      
<section class="cover">
    
  <div class="cover-frame">
    <div class="bg-box">
      <img src="/images/cover5.jpg" alt="image frame" />
    </div>
    <div class="cover-inner text-center text-white">
      <h1><a href="/">HomePage</a></h1>
      <div id="subtitle-box">
        
          <span id="subtitle">Less is More</span>
        
      </div>
      <div>
        
      </div>
    </div>
  </div>
  <div class="cover-learn-more">
    <a href="javascript:void(0)" class="anchor"><i class="ri-arrow-down-line"></i></a>
  </div>
</section>




<!-- Subtitle -->

<div id="main">
  <section class="outer">
  
  
  

<div class="notice" style="margin-top:50px">
    <i class="ri-heart-fill"></i>
    <div class="notice-content" id="broad"></div>
</div>
<script type="text/javascript">
    fetch('https://v1.hitokoto.cn')
        .then(response => response.json())
        .then(data => {
            document.getElementById("broad").innerHTML = data.hitokoto;
        })
        .catch(console.error)
</script>

<style>
    .notice {
        padding: 20px;
        border: 1px dashed #e6e6e6;
        color: #969696;
        position: relative;
        display: inline-block;
        width: 100%;
        background: #fbfbfb50;
        border-radius: 10px;
    }

    .notice i {
        float: left;
        color: #999;
        font-size: 16px;
        padding-right: 10px;
        vertical-align: middle;
        margin-top: -2px;
    }

    .notice-content {
        display: initial;
        vertical-align: middle;
    }
</style>
  
  <article class="articles">
    
    
    
    
    <article
  id="post-LLM-01-chatGLM的finetune"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/05/06/LLM-01-chatGLM%E7%9A%84finetune/"
    >LLM-01-chatGLM的finetune</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/05/06/LLM-01-chatGLM%E7%9A%84finetune/" class="article-date">
  <time datetime="2023-05-06T08:22:05.000Z" itemprop="datePublished">2023-05-06</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>在LLM大火的今天，无数技术研究者想要利用chatGPT提高自己的生产力。但由于其不开源，无法满足各种定制化的需求。在中文环境中，chatGLM是一个较为优秀的开源LLM模型。我们可以基于它进行微调，从而提升它在某些垂直领域的能力，满足定制化的需求。</p>
<blockquote>
<p>本文主要参考chatGLM项目中的finetune指引： https://github.com/THUDM/ChatGLM-6B/tree/main/ptuning</p>
</blockquote>
<h2 id="环境准备">01-环境准备</h2>
<p>建议内存48G以上，显存24G以上。</p>
<p>python环境按照chatGLM项目的需求进行配置即可。</p>
<p>配置完成后，检查显卡是否可用 <img src="Pasted%20image%2020230506113847.png" /></p>
<h2 id="模型准备">02-模型准备</h2>
<p>首先clone项目 https://github.com/THUDM/ChatGLM-6B <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/THUDM/ChatGLM-6B.git</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>文章撰写时的commit_id为2873a6f452340565ff3cd130d5f7009a35c12154 hugging face上模型的commit_id为：658202d88ac4bb782b99e99ac3adff58b4d0b813</p>
</blockquote>
<p>然后按照readme中《从本地加载模型》章节的指引，将模型下载至本地。本文将其放置在<code>ChatGLM-6B/model/chatglm-6b</code>目录下。</p>
<p>修改<code>cli_demo.py</code>中<code>from_pretrained</code>方法的路径，将模型路径改为我们刚才设置的路径下</p>
<p>通过运行cli_demo.py来测试是否一切OK，如果出现问题，建议逐一check下载文件的sha256是否跟hugging face上一致。</p>
<p><img src="Pasted%20image%2020230506130900.png" /></p>
<h2 id="训练数据">03-训练数据</h2>
<p>chatGLM官方的微调指引中，使用了<a href="https://github.com/THUDM/P-tuning-v2" target="_blank" rel="noopener">P-Tuning v2</a> 的微调技术。数据集使用的是 <a href="https://aclanthology.org/D19-1321.pdf" target="_blank" rel="noopener">ADGEN</a> (广告生成) 数据集。</p>
<p>ADGEN 数据集任务为根据输入（content）生成一段广告词（summary）。 <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    <span class="attr">"content"</span>: <span class="string">"类型#上衣*版型#宽松*版型#显瘦*图案#线条*衣样式#衬衫*衣袖型#泡泡袖*衣款式#抽绳"</span>,</span><br><span class="line">    <span class="attr">"summary"</span>: <span class="string">"这件衬衫的款式非常的宽松，利落的线条可以很好的隐藏身材上的小缺点，穿在身上有着很好的显瘦效果。领口装饰了一个可爱的抽绳，漂亮的绳结展现出了十足的个性，配合时尚的泡泡袖型，尽显女性甜美可爱的气息。"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>从 <a href="https://drive.google.com/file/d/13_vf0xRTQsyneRKdD1bZIr93vBGOczrk/view?usp=sharing" target="_blank" rel="noopener">Google Drive</a> 或者 <a href="https://cloud.tsinghua.edu.cn/f/b3f119a008264b1cabd1/?dl=1" target="_blank" rel="noopener">Tsinghua Cloud</a> 下载处理好的 ADGEN 数据集，将解压后的 <code>AdvertiseGen</code> 目录放到项目的目录下。</p>
<figure>
<img src="Pasted%20image%2020230506115651.png" alt="-c200" /><figcaption aria-hidden="true">-c200</figcaption>
</figure>
<h2 id="微调模型">04-微调模型</h2>
<p>还需要安装依赖 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install jieba datasets rouge_chinese</span><br></pre></td></tr></table></figure></p>
<p>进入<code>ptuning</code>文件夹，修改<code>train.sh</code>中数据集的路径和本地模型的路径，如果按照上图的结构放置训练数据集和模型，则需在路径前加<code>../</code> 其他配置可按需修改。运行p-tuning执行下面命令 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash train.sh</span><br></pre></td></tr></table></figure></p>
<p><code>quantization_bit</code>可以对模型进行量化，适合显存较小的情况。默认配置（quantization_bit=4、per_device_train_batch_size=1、gradient_accumulation_steps=16）的情况下训练仅需6个G的显存，训练3000个step需要4个多小时。 <img src="Pasted%20image%2020230506132259.png" /></p>
<p>如果不使用量化，其他参数不变的情况下，我这边实测需要13.5G的显存，但训练速度反而更快了。 <img src="Pasted%20image%2020230506133044.png" /></p>
<p>上述的默认配置中，除了量化之外的两个参数，表示一次训练迭代会以 1 的批处理大小进行 16 次累加的前后向传播，等效为 16 的总批处理大小。若想在同等批处理大小下提升训练效率，可在二者乘积不变的情况下，加大per_device_train_batch_size的值，但会增加显存消耗。我这里按照实际情况调整了参数，目前已经可以在1.5小时内完成训练了。</p>
<figure>
<img src="Pasted%20image%2020230506150312.png" alt="-c500" /><figcaption aria-hidden="true">-c500</figcaption>
</figure>
<p>如果需要进行全参数的 Finetune，需要安装 <a href="https://github.com/microsoft/DeepSpeed" target="_blank" rel="noopener">Deepspeed</a>，然后运行以下指令： <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash ds_train_finetune.sh</span><br></pre></td></tr></table></figure> 由于资源问题（穷），这部分就先跳过了。之后有机会在详细介绍。</p>
<h3 id="使用自己的数据集微调">使用自己的数据集微调</h3>
<p>修改 <code>train.sh</code> 和 <code>evaluate.sh</code> 中的 <code>train_file</code>、<code>validation_file</code>和<code>test_file</code>为你自己的 JSON 格式数据集路径，并将 <code>prompt_column</code> 和 <code>response_column</code> 改为 JSON 文件中输入文本和输出文本对应的 KEY。可能还需要增大 <code>max_source_length</code> 和 <code>max_target_length</code> 来匹配你自己的数据集中的最大输入输出长度。</p>
<h3 id="对话数据集">对话数据集</h3>
<p>如需要使用多轮对话数据对模型进行微调，可以提供聊天历史，例如以下是一个三轮对话的训练数据： <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&#123;<span class="attr">"prompt"</span>: <span class="string">"长城h3风扇不转。继电器好的。保险丝好的传感器新的风扇也新的这是为什么。就是继电器缺一个信号线"</span>, <span class="attr">"response"</span>: <span class="string">"用电脑能读数据流吗？水温多少"</span>, <span class="attr">"history"</span>: []&#125;</span><br><span class="line">&#123;<span class="attr">"prompt"</span>: <span class="string">"95"</span>, <span class="attr">"response"</span>: <span class="string">"上下水管温差怎么样啊？空气是不是都排干净了呢？"</span>, <span class="attr">"history"</span>: [[<span class="string">"长城h3风扇不转。继电器好的。保险丝好的传感器新的风扇也新的这是为什么。就是继电器缺一个信号线"</span>, <span class="string">"用电脑能读数据流吗？水温多少"</span>]]&#125;</span><br><span class="line">&#123;<span class="attr">"prompt"</span>: <span class="string">"是的。上下水管都好的"</span>, <span class="attr">"response"</span>: <span class="string">"那就要检查线路了，一般风扇继电器是由电脑控制吸合的，如果电路存在断路，或者电脑坏了的话会出现继电器不吸合的情况！"</span>, <span class="attr">"history"</span>: [[<span class="string">"长城h3风扇不转。继电器好的。保险丝好的传感器新的风扇也新的这是为什么。就是继电器缺一个信号线"</span>, <span class="string">"用电脑能读数据流吗？水温多少"</span>], [<span class="string">"95"</span>, <span class="string">"上下水管温差怎么样啊？空气是不是都排干净了呢？"</span>]]&#125;</span><br></pre></td></tr></table></figure></p>
<p>训练时需要指定 <code>--history_column</code> 为数据中聊天历史的 key（在此例子中是 <code>history</code>），将自动把聊天历史拼接。要注意超过输入长度 <code>max_source_length</code> 的内容会被截断。</p>
<p>可以参考以下指令： <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">bash train_chat.sh</span><br></pre></td></tr></table></figure></p>
<h2 id="测试模型">05-测试模型</h2>
<p>文章撰写时的版本，保存的是新 Checkpoint（只包含 PrefixEncoder 参数），因此也需要load原有的模型参数。这里将上一级目录的<code>cli_demo.py</code>复制到ptuning目录下，并且将model.eval()之前的内容修改为 <figure class="highlight python"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> os</span><br><span class="line"><span class="keyword">import</span> platform</span><br><span class="line"><span class="keyword">import</span> signal</span><br><span class="line"><span class="keyword">import</span> torch</span><br><span class="line"><span class="keyword">from</span> transformers <span class="keyword">import</span> AutoTokenizer, AutoModel, AutoConfig</span><br><span class="line"></span><br><span class="line">CHECKPOINT_PATH = <span class="string">"../output/adgen-chatglm-6b-pt-128-2e-2/checkpoint-3000"</span></span><br><span class="line"></span><br><span class="line">tokenizer = AutoTokenizer.from_pretrained(<span class="string">"../model/chatglm-6b"</span>, trust_remote_code=<span class="literal">True</span>)</span><br><span class="line">config = AutoConfig.from_pretrained(<span class="string">"../model/chatglm-6b"</span>, trust_remote_code=<span class="literal">True</span>, pre_seq_len=<span class="number">128</span>)</span><br><span class="line">model = AutoModel.from_pretrained(<span class="string">"../model/chatglm-6b"</span>, config=config, trust_remote_code=<span class="literal">True</span>)</span><br><span class="line">prefix_state_dict = torch.load(os.path.join(CHECKPOINT_PATH, <span class="string">"pytorch_model.bin"</span>))</span><br><span class="line">new_prefix_state_dict = &#123;&#125;</span><br><span class="line"><span class="keyword">for</span> k, v <span class="keyword">in</span> prefix_state_dict.items():</span><br><span class="line">    <span class="keyword">if</span> k.startswith(<span class="string">"transformer.prefix_encoder."</span>):</span><br><span class="line">        new_prefix_state_dict[k[len(<span class="string">"transformer.prefix_encoder."</span>):]] = v</span><br><span class="line">model.transformer.prefix_encoder.load_state_dict(new_prefix_state_dict)</span><br><span class="line"></span><br><span class="line">model = model.half().cuda()</span><br><span class="line">model.transformer.prefix_encoder.float()</span><br><span class="line">model = model.eval()</span><br></pre></td></tr></table></figure></p>
<p>运行cli_demo.py后，就可以进行测试了。 <img src="Pasted%20image%2020230506151424.png" /></p>
<p>对比fine-tune前的模型 <img src="Pasted%20image%2020230506151727.png" /></p>
<p>可以看到在训练数据集上的回答效果显著提升</p>
<h2 id="评估模型">06-评估模型</h2>
<p>评估模型是去评估微调模型的好坏，我们可以调用<code>evaluate.sh</code>来进行评估，其中部分路径也需要进行修改。评测指标为中文 Rouge score 和 BLEU-4，会将评估结果输出到文本文件中。</p>
<p>官方对比了全量微调，ptuning微调和lora微调的效果。其中LoRA实现采用的是 <a href="https://github.com/yuanzhoulvpi2017/zero_nlp/tree/main/simple_thu_chatglm6b" target="_blank" rel="noopener">simple_thu_chatglm6b</a></p>
<p>结果如下图所示，在官方的测试中，p-tuning &gt; Finetue &gt; Lora <img src="Pasted%20image%2020230506134755.png" alt="-c500" /></p>
<h2 id="总结">总结</h2>
<p>本文主要记录了一次对于fine-tune的尝试。下一步可能会去了解一下langchain的细节，做一些有意思的东西。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-LLM-00-chatGLM的使用"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/05/06/LLM-00-chatGLM%E7%9A%84%E4%BD%BF%E7%94%A8/"
    >LLM-00-chatGLM的使用</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/05/06/LLM-00-chatGLM%E7%9A%84%E4%BD%BF%E7%94%A8/" class="article-date">
  <time datetime="2023-05-06T08:14:54.000Z" itemprop="datePublished">2023-05-06</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>其实按照官方的readme一步步执行即可。</p>
<p>首先clone项目 https://github.com/THUDM/ChatGLM-6B <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/THUDM/ChatGLM-6B.git</span><br></pre></td></tr></table></figure></p>
<blockquote>
<p>文章撰写时的commit_id为2873a6f452340565ff3cd130d5f7009a35c12154</p>
</blockquote>
<p>安装依赖 <figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">pip install -r requirements.txt</span><br></pre></td></tr></table></figure></p>
<p>使用transformer包即可下载huggingface的模型并使用，具体的code在官方的readme中。如果需要指定模型的版本，在可以在 <code>from_pretrained</code> 的调用中增加 <code>revision="v0.1.0"</code> 参数。</p>
<p><img src="20230506161935.jpg" /></p>
<p>此外还有api调用和gradio界面等等方式，这里不再赘述。总之，想要简单的用起来还是很容易的，readme写的很好。</p>
<p>本文作为LLM系列的开始，内容比较简单，后面会有新的探索会继续更新。</p>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Sam-Altman论如何高效工作"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2023/03/07/Sam-Altman%E8%AE%BA%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E5%B7%A5%E4%BD%9C/"
    >Sam Altman论如何高效工作</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2023/03/07/Sam-Altman%E8%AE%BA%E5%A6%82%E4%BD%95%E9%AB%98%E6%95%88%E5%B7%A5%E4%BD%9C/" class="article-date">
  <time datetime="2023-03-07T09:02:11.000Z" itemprop="datePublished">2023-03-07</time>
</a>    
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <blockquote>
<p>今天翻译一篇Sam Altman的文章。他是硅谷著名投资人，年仅29岁时就被硅谷创业教父Paul Graham委以Y Combinator新任掌门人的重任，他还和Elon Musk一起创办了OpenAI 公司，可谓是天子骄子，年少有为。</p>
<p>以下是他对于效率的理解和如何提高效率的方法。</p>
</blockquote>
<p>我认为自己至少比普通人效率更高一点，人们有时也会问我提高效率的秘诀，所以我决定写一篇文章，谈谈我对效率的理解。</p>
<p>「复利」是金融领域的一个概念，但同样在职场上适用。每天提高一点点的效率，50年后的复利增长会让你大吃一惊。所以，现在花费一些时间了解如何提升效率是十分值得的。如果你每天能比别人多做10%的事情，精进1%，复利带来的积极效果将使你脱颖而出。</p>
<h1 id="你在忙些什么">1. 你在忙些什么</h1>
<p><strong>如果你在错误的道路上前行，无论你前进的多快，都是在做无用功。选择正确的事情去做，才是提升效率的根本，也是经常容易被人们忽略的部分。</strong> 所以，留出足够的时间想想你的方向吧！独立思考能力是极为稀缺的，但是通过不断地实践，你可以逐渐培养这项能力。</p>
<p>在我认识的人当中，能给我留下深刻印象的都是那些可以坚持自我的人，这在人群中并不常见。如果你发现自己总是在人云亦云，这可不是一个好的迹象。也许你在反对他人的时候会犯错，但是你需要培养自信心，坚持那些你认为是正确的原则，这样当你在面对重要的决策上，就不会随波逐流，而有勇气坚持己见。</p>
<p>我确保自己会留出一定的时间思考我应该忙些什么。看一本书，和有趣的人交谈，回归大自然，都可以帮助我的思考。</p>
<p>在过去的经验中不难发现，如果让我做一些我不喜欢或者不在乎的事情，我无法高效工作。所以，我不会轻易地把自己陷于不得不做某件事的境地（或者委托别人做，或者不做，或者采取其他方法），强迫自己做你不喜欢的事儿只会消磨士气和动力。</p>
<p>关于委托他人，我想多说一句：请记住，他人在做自己喜欢的事情时也会十分的高产，当你委托他人做你不想做的事情时，请确保这个人确实喜欢做，并且擅长做这件事。</p>
<p>如果你发现自己一直在做不喜欢的事情，请认真地考虑下转换工作跑道。短期的抱怨和劳累会发生，但如果你在休假后还是感到厌倦和疲累，也许你应该给自己找点喜欢做的事情了。</p>
<p>我十分幸运的找到了自己喜爱的工作，我甚至可以免费来工作，这是我可以保证高效工作的原因。</p>
<p>最重要的一点就是知道你可以学习任何你想学的东西，你也可以很快地进步。这听上去好像有点不可思议，但最终你会发现，你确实可以很快的转换跑道。</p>
<p>好的工作离不开好的同事。确保自己身边的同事是聪明的，高产的，快乐的，积极向上的人，他们不会贬低你的理想和抱负。我喜欢拥有可以鞭策我，鼓励我的同事。尽自己的可能避免那些有毒的同事，他们会严重影响你的工作效率和精力。</p>
<p>你必须选择正确的问题去解决，这条道路上没有捷径。如果你真的想做一些重要的事情，你必须努力而聪明地工作，尽最大的努力去角逐最终的收获，确实有例外的人（很多伟大的数学家一周并没有工作多长时间），但对大多数人来讲，勤能补拙才是良训。</p>
<h1 id="优先权">2. 优先权</h1>
<p>我的高效工作理念有三个支柱：<strong>「确保重要的事儿做完」、「别在蠢事上浪费时间」、「列大量的清单」</strong>。</p>
<p>这里十分推荐「列清单」这个方法。我会列出每年每月甚至每日要完成的任务列表，清单存在的意义在于让我可以排空大脑进而更加专注，如果我现在不想做某件事，我可以在清单上找到下一件事情来做。</p>
<p>我倾向于将待办事情写在纸上，但我不会将这些待办事项归类或者预估完成时间，我会在重要的事情后面列个星标，提醒我这些应该优先完成。</p>
<p>我尝试把待办事宜是否能激发我的动力来进行优先排列。我完成的事情越多，就会越感到开心，从而有动力来做更多的事情。所以我一般会在一天开始或者结束时做一些能让我尽快完成的事情。</p>
<p>我对于完成重要事情的决心近乎残酷，很多情况下当我真的想完成某事时，我会想法设法让其实现，而最终的结果也如我所愿。</p>
<p>我经常会无情地说「不」，尽可能快的去处理那些不重要的事情。我有可能在这一点上做的有些过头了，举个例子来说，我回复电子邮件时总是简单粗暴。</p>
<p>我尽量避免参加会议和活动，因为很多情况下这都是在浪费时间。但是，你应该确保在你的日程中留出足够的时间接触新面孔和新想法，拥有开放的人际关系网络十分重要。尽管我参与的会议中90%的都是在浪费时间，但是也有10%的会议和活动让我受益匪浅，可以弥补那90%的损失。</p>
<p>我发现最好的会议时间是15-20分钟或者2小时。一般默认的一小时会议通常会有大把的时间被浪费掉。</p>
<p>根据每天时间的不同，我会安排不同的工作。每天早上起床后的几个小时是我最高效的时候，这时候我会选择自我封闭起来工作，然后在下午见人。当我发现我的注意力偏离时，我会停下来休息，或者转换工作任务，以便保持高效率的工作状态。</p>
<p>我认为大多数人并没有把时间看的太重要，我实在想不明白有些人明明一小时赚100块钱，但却花费数小时做一些他们不喜欢的事情，只为省下20块钱。</p>
<p>同时，不要掉入高效率的陷阱中，为了高效而高效并没有什么意义。很多人花费大量的时间去优化自己的时间管理能力，却从没想过自己究竟是不是在正确的方向上做正确的事。如果你本身方向错了，那你挤出再多的时间来做错的事情，结果也不会令自己满意。</p>
<p>正确的做法是仔细规划好这一年，而不是纠结于规划一天的时间。</p>
<h1 id="体能状况">3. 体能状况</h1>
<p>很多情况下，对我有效的方法不一定对你有效。你需要找到自己身体的喜好，如果你可以早日研究透自己的生理规律，将对你生活的各个方面起到积极作用。</p>
<p>我在过去几年间每周都会花费一定的时间研究尝试适合自己的生活方式，我认为如果我能在如下方面做得足够好，我的效率将得到1.5倍的提高。</p>
<p>睡眠是影响我效率的最大因素，很多睡眠记录软件可以帮助我提升睡眠质量，我十分推荐Emfit QS+Active这家出品的睡眠记录仪，我只需要提前设置好，就不用再花费任何精力管理它。</p>
<p>我喜欢在凉爽，黑暗并且安静的房间入睡，我在购买床垫时毫不心疼花费多少钱。对于我来说，好的床垫可以提升我的睡眠质量，所以这项投资是十分值得的，我正在用的是这一家的床垫* 。避免睡前大量进食也对拥有好的睡眠质量起到帮助，避免喝酒也会有效，但我很难遵守这条规则。</p>
<p>我在睡觉时习惯使用冰袋 ，因为我很难在闷热的环境中入睡。在旅行时，我使用眼罩和耳塞。</p>
<p>现在我要介绍的方法可能会产生争议，我通常会使用低剂量的安眠药助眠（吞服指定剂量的1/3），或者在很难入睡时吸服大麻。我的睡眠质量总体来说并不理想，尤其是在出差时，我很难入睡，所以吃点药对我有很大的帮助，如果你本身没有睡眠问题，那我不推荐你尝试我的方法。</p>
<p>当我在清晨花费1--15分钟处理邮件时，我使用全光谱LED灯照明，如果你读完我的文章只想采取一条建议，我推荐你购买这盏灯*，尤其是在旅行中，你也可以随身携带。</p>
<p>运动是仅次于睡眠的一项影响我效率的因素，我经常花费数月的时间尝试某种运动项目，经年累月下来，我发现每周举重三次，每次一小时对于我来说是最有效的运动方式，我偶尔也会增加HIIT训练，不仅对提升我的效率有用，对我的身体素质提高也大有裨益。</p>
<p>第三点就是饮食习惯，我一般不吃早餐，所以一天当中我有15个小时处于不进食状态（除了每天醒来后喝一杯浓缩咖啡），我知道这项建议并不是对每一个都适用，但是对我来说却十分适用。</p>
<p>吃很多糖对我的状态会造成不好的影响，所以我一直尽力避免食用过多糖分，我同时避免食用对我消化系统不利的或者刺激类的食品（比如说辛辣食品）。我对于甜品一直没有抵抗力，所以通常情况下，我会避免购买任何甜品放在家中。</p>
<p>每天起床后我会引用一杯浓缩咖啡，午饭后再来一杯，我每天的咖啡因摄入量是200毫克，对于我来说足够提神醒脑。但是，有时候如果我感到特别的疲累，或者什么项目临近截止日期，我也会喝很多的咖啡来帮助我抵抗困倦。</p>
<p>我从小就是素食主义者，我同时服用维生素B-12, Omega-3脂肪酸, 铁, 维生素D-3等营养素。我每个季度会做一次血常规，也会喝大量的蛋白粉，如果我不是素食者，我想我一定不会喝蛋白粉，实在不是我的菜。</p>
<h1 id="其他建议">4. 其他建议</h1>
<p>我喜欢的工作环境是：自然光，安静，未经允许不会被打扰，不间断的工作时长，舒适休闲（我拥有一台很漂亮的办公桌，上面有很多台4K显示器，但是我大多数时间还是在坐沙发上和我的笔记本电脑相伴）。</p>
<p>我编写了一些软件帮助我处理冗杂琐碎的事情，我还学会了如何快速打字，如何使用快捷键来帮我提升工作效率。</p>
<p><strong>和大多数人一样，我也会有几周毫无斗志（我觉得这可能和饮食有关），这种状态实在令人抓狂，而且经常会在不合时宜的时候发生。我还没有发现彻底地解决之道，但是我通常会随遇而安，知道这种状态早晚会过去，事情确实如此。总体来说，我会避开那些会使我心情变糟的人和事儿，无论你是否想提高效率，都应该考虑下这条建议。</strong></p>
<p>在给自己安排任务时，应该略微过量些。我发现我总能完成交给我的任务，有时候任务稍微过量可以使我更加专注，更加高效。但是，请一定不要让自己超负荷工作。</p>
<p>不要为了高产而忽略你的家人和朋友，拿工作和亲情友情去交换实在不划算，不要忽视做自己喜欢的事情。</p>
<p>最后，我想再重申一下，<strong>在错误的方向上提高效率是毫无意义的，当务之急是先选择好自己的方向。</strong></p>
<hr />
<p><strong>延伸阅读：</strong></p>
<ol type="1">
<li>《纽约客》介绍Sam Altman的文章https://zhuanlan.zhihu.com/p/23672766</li>
<li>原文链接：https://blog.samaltman.com/productivity </li>
<li>Sam推荐的床垫：https://www.tempurpedic.com/shop-mattresses/tempur-contour-elite/v/715/ </li>
<li>Sam推荐的灯：https://www.amazon.com/gp/product/B075H39NDL/ </li>
<li>我的时间管理经验：<a href="http://mp.weixin.qq.com/s?__biz=MzAwODgwMjU2Ng==&amp;mid=2651981957&amp;idx=1&amp;sn=f4d130ffd264836fe79af2ef459091a3" target="_blank" rel="noopener">请问你是真的很忙吗？</a></li>
</ol>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%85%B6%E4%BB%96/" rel="tag">其他</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-LATEX-IN-HEXO"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/09/13/LATEX-IN-HEXO/"
    >渲染 Hexo 博客里的 latex 公式</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/09/13/LATEX-IN-HEXO/" class="article-date">
  <time datetime="2021-09-13T02:35:58.000Z" itemprop="datePublished">2021-09-13</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/Blog/">Blog</a> / <a class="article-category-link" href="/categories/Blog/Hexo/">Hexo</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="markdown渲染器的不足">markdown渲染器的不足</h2>
<p>hexo的默认渲染器hexo-renderer-marked不支持latex语法，一些latex中的符号会被误认为是markdown语法，比如<code>\</code>、<code>_</code>和<code>*</code>，这让mathjax不能正确地渲染（katex需要渲染器支持，根本不能工作）。</p>
<h2 id="替换pandoc">替换pandoc</h2>
<p>办法就是替换Hexo的渲染器，比如在博客目录下执行：</p>
<figure class="highlight shell"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">brew install pandoc</span><br><span class="line">npm uninstall hexo-renderer-marked --save</span><br><span class="line">npm install hexo-renderer-pandoc --save</span><br></pre></td></tr></table></figure>
 
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E5%85%B6%E4%BB%96/" rel="tag">其他</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-CapsuleNetwork"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2021/09/10/CapsuleNetwork/"
    >CapsuleNetwork调研</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2021/09/10/CapsuleNetwork/" class="article-date">
  <time datetime="2021-09-10T07:48:53.000Z" itemprop="datePublished">2021-09-10</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/ML/">ML</a> / <a class="article-category-link" href="/categories/ML/%E6%B7%B1%E5%BA%A6%E5%AD%A6%E4%B9%A0/">深度学习</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="为什么提出capsule">为什么提出capsule</h2>
<p>在讨论胶囊网络前，我们先来看一下目前最通用的深度学习模型之一，卷积神经网络（CNN）。 CNN目前已经完成了很多不可思议的任务，对于整个机器学习领域都产生了很大的影响。然而，CNN善于检测特征，却在探索特征（视角，大小，方位）之间的空间关系方面效果较差。举一个简单的例子，对于一张人脸而言，它的组成部分包括面部轮廓，两个眼睛，一个鼻子和一张嘴巴。对于CNN而言，这些部分就足以识别一张人脸；然而，这些组成部分的相对位置以及朝向就没有那么重要。 <img src="16086894305226.jpg" /></p> 
      <a class="article-more-link" href="/2021/09/10/CapsuleNetwork/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ML/" rel="tag">ML</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-FiBiNet"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/07/07/FiBiNet/"
    >FiBiNet：特征重要性+Bilinear交叉</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/07/07/FiBiNet/" class="article-date">
  <time datetime="2020-07-07T15:40:01.000Z" itemprop="datePublished">2020-07-07</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/ML/">ML</a> / <a class="article-category-link" href="/categories/ML/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/">论文阅读</a> / <a class="article-category-link" href="/categories/ML/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/">推荐系统</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>FiBiNET: Combining Feature Importance and Bilinear feature Interaction for Click-Through Rate Prediction</p>
<h2 id="简介">简介</h2>
<p>文章指出当前的许多通过特征组合进行CTR预估的工作主要使用特征向量的内积或哈达玛积来计算交叉特征，这种方法忽略了特征本身的重要程度。提出通过使用Squeeze-Excitation network (SENET) 结构动态学习特征的重要性以及使用一个双线性函数(Bilinear function)来更好的建模交叉特征。</p> 
      <a class="article-more-link" href="/2020/07/07/FiBiNet/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ML/" rel="tag">ML</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-AutoInt"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/07/07/AutoInt/"
    >AutoInt：构造高阶特征交叉</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/07/07/AutoInt/" class="article-date">
  <time datetime="2020-07-07T15:34:56.000Z" itemprop="datePublished">2020-07-07</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/ML/">ML</a> / <a class="article-category-link" href="/categories/ML/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/">论文阅读</a> / <a class="article-category-link" href="/categories/ML/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/%E6%8E%A8%E8%8D%90%E7%B3%BB%E7%BB%9F/">推荐系统</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>AutoInt: Automatic Feature Interaction Learning via Self-Attentive Neural Networks (CIKM 2019)</p> 
      <a class="article-more-link" href="/2020/07/07/AutoInt/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ML/" rel="tag">ML</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-深度召回算法"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/04/04/%E6%B7%B1%E5%BA%A6%E5%8F%AC%E5%9B%9E%E7%AE%97%E6%B3%95/"
    >深度召回算法</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/04/04/%E6%B7%B1%E5%BA%A6%E5%8F%AC%E5%9B%9E%E7%AE%97%E6%B3%95/" class="article-date">
  <time datetime="2020-04-04T13:32:12.000Z" itemprop="datePublished">2020-04-04</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/ML/">ML</a> / <a class="article-category-link" href="/categories/ML/%E8%AE%BA%E6%96%87%E9%98%85%E8%AF%BB/">论文阅读</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <h2 id="一简介">一、简介</h2>
<p>推荐系统的基本架构一般由索引、召回、粗排、精排、重排等几个部分构成，而其中的召回阶段（或者称之为Matching阶段）则主要负责根据用户和内容特征，从众多的内容库中找到用户可能感兴趣的内容。传统的召回算法，如ItemCF等，大多基于统计的方法来计算item之间的相似度，根据用户近期买过的商品进行召回。传统召回算法实现成本低，模型简单响应速度快，但是基于数据统计得到的相似关系缺乏个性化能力，召回商品的发现性，多样性较低。 近年来，随着深度学习的兴起，一些深度召回算法被提出。它们利用深度模型表达能力高，特征提取能力强的特点，提高了个性化召回算法的效果。最初的深度召回算法主要通过深度神经网络挖掘用户和商品在低维表示空间上的相似性，为用户召回低维表示相似的商品，这类方法我们往往称之为向量化召回算法。相比于基于数据统计的相似性计算，向量化召回的个性化程度更高，召回商品的发现性和多样性也较高。还有一些深度召回算法尝试建立商品之间的关系图，通过基于图的深度网络学习，从拓扑关系的角度捕捉商品之间的相关性，这类方法我们称之为基于图的深度召回算法。最后，还有一些方法致力于攻克深度模型带来的性能开销，使得深度模型能够在大规模的召回场景中可用，比如通过树结构和哈希的方法对召回的过程进行提速等等，这类方法我们称之为大规模深度召回算法。本文就从这三类方法展开，介绍一些现有的深度召回算法。</p> 
      <a class="article-more-link" href="/2020/04/04/%E6%B7%B1%E5%BA%A6%E5%8F%AC%E5%9B%9E%E7%AE%97%E6%B3%95/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ML/" rel="tag">ML</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-Pandas处理MovieLen25M数据集"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/21/Pandas%E5%A4%84%E7%90%86MovieLen25M%E6%95%B0%E6%8D%AE%E9%9B%86/"
    >Pandas处理MovieLen25M数据集</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/03/21/Pandas%E5%A4%84%E7%90%86MovieLen25M%E6%95%B0%E6%8D%AE%E9%9B%86/" class="article-date">
  <time datetime="2020-03-21T13:09:19.000Z" itemprop="datePublished">2020-03-21</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/ML/">ML</a> / <a class="article-category-link" href="/categories/ML/python/">python</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>最近做了一些推荐侧召回的实验尝试，除了在业务的数据上进行测试，我还想在公开数据集上进行验证。参考Related works，最终选择使用MovieLen和Amazon的数据集。由于这两个数据集给的是裸的数据，因此需要我们根据自己的需要做一些处理。这里我用pandas来做数据的分析和处理。</p> 
      <a class="article-more-link" href="/2020/03/21/Pandas%E5%A4%84%E7%90%86MovieLen25M%E6%95%B0%E6%8D%AE%E9%9B%86/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/ML/" rel="tag">ML</a></li></ul>

    </footer>
  </div>

    
 
    
</article>

    
    <article
  id="post-2020-03-15"
  class="article article-type-post"
  itemscope
  itemprop="blogPost"
  data-scroll-reveal
>
  <div class="article-inner">
    
    <header class="article-header">
       
<h2 itemprop="name">
  <a class="article-title" href="/2020/03/16/2020-03-15/"
    >2020年03月15日</a> 
</h2>
 

      
    </header>
     
    <div class="article-meta">
      <a href="/2020/03/16/2020-03-15/" class="article-date">
  <time datetime="2020-03-15T17:02:01.000Z" itemprop="datePublished">2020-03-16</time>
</a> 
  <div class="article-category">
    <a class="article-category-link" href="/categories/%E9%9A%8F%E7%AC%94/">随笔</a>
  </div>
   
    </div>
      
    <div class="article-entry" itemprop="articleBody">
       
  <p>今天感觉最近的生活状态不是很对，花了很多时间在没有特别多意义的事情上。如何能够专注在一个事情上，做更深入的思考，这时一个值得探索的课题。不仅是做完，更是打磨完善，直到超出某个阈值，这样才能把事情做到让旁人觉得值得点赞的程度。</p> 
      <a class="article-more-link" href="/2020/03/16/2020-03-15/"
        >阅读更多...</a
      >
       
      <!-- reward -->
      
    </div>
    

    <!-- copyright -->
    
    <footer class="article-footer">
       
  <ul class="article-tag-list" itemprop="keywords"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/%E9%9A%8F%E7%AC%94/" rel="tag">随笔</a></li></ul>

    </footer>
  </div>

   
    
</article>

    
  </article>
  

  
  <nav class="page-nav">
    
    <span class="page-number current">1</span><a class="page-number" href="/page/2/">2</a><a class="extend next" rel="next" href="/page/2/">下一页</a>
  </nav>
  
</section>
</div>

      <footer class="footer">
  <div class="outer">
    <ul>
      <li>
        Copyrights &copy;
        2020-2023
        <i class="ri-heart-fill heart_icon"></i> AlexZhou
      </li>
    </ul>
    <ul>
      <li>
        
      </li>
    </ul>
    <ul>
      <li>
        
        
        <span>
  <span><i class="ri-user-3-fill"></i>Visitors:<span id="busuanzi_value_site_uv"></span></span>
  <span class="division">|</span>
  <span><i class="ri-eye-fill"></i>Views:<span id="busuanzi_value_page_pv"></span></span>
</span>
        
      </li>
    </ul>
    <ul>
      
    </ul>
    <ul>
      
    </ul>
    <ul>
      <li>
        <!-- cnzz统计 -->
        
        <script type="text/javascript" src='https://s9.cnzz.com/z_stat.php?id=1278069914&amp;web_id=1278069914'></script>
        
      </li>
    </ul>
  </div>
</footer>    
    </main>
    <div class="float_btns">
      <div class="totop" id="totop">
  <i class="ri-arrow-up-line"></i>
</div>

<div class="todark" id="todark">
  <i class="ri-moon-line"></i>
</div>

    </div>
    <aside class="sidebar on">
      <button class="navbar-toggle"></button>
<nav class="navbar">
  
  <div class="logo">
    <a href="/"><img src="/images/ayer-side.svg" alt="HomePage"></a>
  </div>
  
  <ul class="nav nav-main">
    
    <li class="nav-item">
      <a class="nav-item-link" href="/">主页</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/archives">归档</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/categories">分类</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags">标签</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/ML/">ML</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E9%9A%8F%E7%AC%94/">随笔</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/tags/%E5%85%B6%E4%BB%96/">其他</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/photos">相册</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/friends">友链</a>
    </li>
    
    <li class="nav-item">
      <a class="nav-item-link" href="/about">关于我</a>
    </li>
    
  </ul>
</nav>
<nav class="navbar navbar-bottom">
  <ul class="nav">
    <li class="nav-item">
      
      <a class="nav-item-link nav-item-search"  title="Search">
        <i class="ri-search-line"></i>
      </a>
      
      
      <a class="nav-item-link" target="_blank" href="/atom.xml" title="RSS Feed">
        <i class="ri-rss-line"></i>
      </a>
      
    </li>
  </ul>
</nav>
<div class="search-form-wrap">
  <div class="local-search local-search-plugin">
  <input type="search" id="local-search-input" class="local-search-input" placeholder="Search...">
  <div id="local-search-result" class="local-search-result"></div>
</div>
</div>
    </aside>
    <div id="mask"></div>

<!-- #reward -->
<div id="reward">
  <span class="close"><i class="ri-close-line"></i></span>
  <p class="reward-p"><i class="ri-cup-line"></i>请我喝杯咖啡吧~</p>
  <div class="reward-box">
    
    <div class="reward-item">
      <img class="reward-img" src="/images/alipay.jpg">
      <span class="reward-type">支付宝</span>
    </div>
    
    
    <div class="reward-item">
      <img class="reward-img" src="/images/wechat.jpg">
      <span class="reward-type">微信</span>
    </div>
    
  </div>
</div>
    
<script src="/js/jquery-3.6.0.min.js"></script>
 
<script src="/js/lazyload.min.js"></script>

<!-- Tocbot -->

<script src="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.js"></script>
<link
  rel="stylesheet"
  href="https://cdn.jsdelivr.net/npm/jquery-modal@0.9.2/jquery.modal.min.css"
/>
<script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js"></script>

<script src="/dist/main.js"></script>

<!-- ImageViewer -->
 <!-- Root element of PhotoSwipe. Must have class pswp. -->
<div class="pswp" tabindex="-1" role="dialog" aria-hidden="true">

    <!-- Background of PhotoSwipe. 
         It's a separate element as animating opacity is faster than rgba(). -->
    <div class="pswp__bg"></div>

    <!-- Slides wrapper with overflow:hidden. -->
    <div class="pswp__scroll-wrap">

        <!-- Container that holds slides. 
            PhotoSwipe keeps only 3 of them in the DOM to save memory.
            Don't modify these 3 pswp__item elements, data is added later on. -->
        <div class="pswp__container">
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
            <div class="pswp__item"></div>
        </div>

        <!-- Default (PhotoSwipeUI_Default) interface on top of sliding area. Can be changed. -->
        <div class="pswp__ui pswp__ui--hidden">

            <div class="pswp__top-bar">

                <!--  Controls are self-explanatory. Order can be changed. -->

                <div class="pswp__counter"></div>

                <button class="pswp__button pswp__button--close" title="Close (Esc)"></button>

                <button class="pswp__button pswp__button--share" style="display:none" title="Share"></button>

                <button class="pswp__button pswp__button--fs" title="Toggle fullscreen"></button>

                <button class="pswp__button pswp__button--zoom" title="Zoom in/out"></button>

                <!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR -->
                <!-- element will get class pswp__preloader--active when preloader is running -->
                <div class="pswp__preloader">
                    <div class="pswp__preloader__icn">
                        <div class="pswp__preloader__cut">
                            <div class="pswp__preloader__donut"></div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="pswp__share-modal pswp__share-modal--hidden pswp__single-tap">
                <div class="pswp__share-tooltip"></div>
            </div>

            <button class="pswp__button pswp__button--arrow--left" title="Previous (arrow left)">
            </button>

            <button class="pswp__button pswp__button--arrow--right" title="Next (arrow right)">
            </button>

            <div class="pswp__caption">
                <div class="pswp__caption__center"></div>
            </div>

        </div>

    </div>

</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.css">
<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/default-skin/default-skin.min.css">
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/photoswipe@4.1.3/dist/photoswipe-ui-default.min.js"></script>

<script>
    function viewer_init() {
        let pswpElement = document.querySelectorAll('.pswp')[0];
        let $imgArr = document.querySelectorAll(('.article-entry img:not(.reward-img)'))

        $imgArr.forEach(($em, i) => {
            $em.onclick = () => {
                // slider展开状态
                // todo: 这样不好，后面改成状态
                if (document.querySelector('.left-col.show')) return
                let items = []
                $imgArr.forEach(($em2, i2) => {
                    let img = $em2.getAttribute('data-idx', i2)
                    let src = $em2.getAttribute('data-target') || $em2.getAttribute('src')
                    let title = $em2.getAttribute('alt')
                    // 获得原图尺寸
                    const image = new Image()
                    image.src = src
                    items.push({
                        src: src,
                        w: image.width || $em2.width,
                        h: image.height || $em2.height,
                        title: title
                    })
                })
                var gallery = new PhotoSwipe(pswpElement, PhotoSwipeUI_Default, items, {
                    index: parseInt(i)
                });
                gallery.init()
            }
        })
    }
    viewer_init()
</script> 
<!-- MathJax -->
 <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
      tex2jax: {
          inlineMath: [ ['$','$'], ["\\(","\\)"]  ],
          processEscapes: true,
          skipTags: ['script', 'noscript', 'style', 'textarea', 'pre', 'code']
      }
  });

  MathJax.Hub.Queue(function() {
      var all = MathJax.Hub.getAllJax(), i;
      for(i=0; i < all.length; i += 1) {
          all[i].SourceElement().parentNode.className += ' has-jax';
      }
  });
</script>

<script src="https://cdn.jsdelivr.net/npm/mathjax@2.7.6/unpacked/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
<script>
  var ayerConfig = {
    mathjax: true,
  };
</script>

<!-- Katex -->

<!-- busuanzi  -->
 
<script src="/js/busuanzi-2.3.pure.min.js"></script>
 
<!-- ClickLove -->

<!-- ClickBoom1 -->

<!-- ClickBoom2 -->
 
<script src="/js/clickBoom2.js"></script>
 
<!-- CodeCopy -->
 
<link rel="stylesheet" href="/css/clipboard.css">
 <script src="https://cdn.jsdelivr.net/npm/clipboard@2/dist/clipboard.min.js"></script>
<script>
  function wait(callback, seconds) {
    var timelag = null;
    timelag = window.setTimeout(callback, seconds);
  }
  !function (e, t, a) {
    var initCopyCode = function(){
      var copyHtml = '';
      copyHtml += '<button class="btn-copy" data-clipboard-snippet="">';
      copyHtml += '<i class="ri-file-copy-2-line"></i><span>COPY</span>';
      copyHtml += '</button>';
      $(".highlight .code pre").before(copyHtml);
      $(".article pre code").before(copyHtml);
      var clipboard = new ClipboardJS('.btn-copy', {
        target: function(trigger) {
          return trigger.nextElementSibling;
        }
      });
      clipboard.on('success', function(e) {
        let $btn = $(e.trigger);
        $btn.addClass('copied');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-checkbox-circle-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPIED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-checkbox-circle-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
      clipboard.on('error', function(e) {
        e.clearSelection();
        let $btn = $(e.trigger);
        $btn.addClass('copy-failed');
        let $icon = $($btn.find('i'));
        $icon.removeClass('ri-file-copy-2-line');
        $icon.addClass('ri-time-line');
        let $span = $($btn.find('span'));
        $span[0].innerText = 'COPY FAILED';
        
        wait(function () { // 等待两秒钟后恢复
          $icon.removeClass('ri-time-line');
          $icon.addClass('ri-file-copy-2-line');
          $span[0].innerText = 'COPY';
        }, 2000);
      });
    }
    initCopyCode();
  }(window, document);
</script>
 
<!-- CanvasBackground -->

<script>
  if (window.mermaid) {
    mermaid.initialize({ theme: "forest" });
  }
</script>


    
    

  </div>
<script src="/live2dw/lib/L2Dwidget.min.js?094cbace49a39548bed64abff5988b05"></script><script>L2Dwidget.init({"pluginRootPath":"live2dw/","pluginJsPath":"lib/","pluginModelPath":"assets/","tagMode":false,"debug":false,"model":{"scale":1,"hHeadPos":0.5,"vHeadPos":0.5,"jsonPath":"/live2dw/assets/wanko.model.json"},"display":{"position":"left","width":300,"height":300,"superSample":2,"hOffset":20,"vOffset":0},"mobile":{"show":false,"scale":0.5},"react":{"opacity":0.8},"log":false});</script></body>

</html>